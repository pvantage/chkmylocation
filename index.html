<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Clap Me</title>
<link href="css/style.css" type="text/css" rel="stylesheet">
<link href="css/bootstrap.min.css" type="text/css" rel="stylesheet">
<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>



</head>

<body>
<div class="wrapper picuplocation">
  <div class="container">
    <div class="innerpage">
	<div class="innermidbox picupmid">
	<div class="picup-vehicle">
	<div class="map-box" id="gmap">
	</div>
	
	
	

    </div>


	</div>
  </div>
</div>



<!-- Modal -->
<div id="myprofilemenus" class="modal fade menupopup" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      
     
    </div>

  </div>
</div>
</div>
<script type="text/javascript" charset="utf-8" src="cordova.js"></script>

<script src="https://maps.googleapis.com/maps/api/js?sensor=true&libraries=geometry&key=AIzaSyAdRw4y6QbeCa2AVoQcI_j7NMQZPYDrabU" type="text/javascript"></script>
	<script type="text/javascript">
	
function showNotify(){	
	cordova.plugins.diagnostic.switchToLocationSettings();
	return true;
}
document.addEventListener('deviceready', setupGeolocation, false);

function setupGeolocation () {
	alert('test1');
    /**
     * This function will be executed every time a geolocation was got on the background.
     */
    var callbackFn = function(location) {
		navigator.notification.alert(
			'[js] BackgroundGeoLocation callback: ' + location.latitude + ',' + location.longitude,  // message
			showNotify,         // callback
			'Game Over',            // title
			'Done'                  // buttonName
		);
          // Console.log only is here. You need to setup your own data interaction here
      //alert('[js] BackgroundGeoLocation callback:  ' + location.latitude + ',' + location.longitude);
      /*
      IMPORTANT:  You must execute the finish method here to inform the native plugin that you're finished,
      and the background-task may be completed.  You must do this regardless if your HTTP request is successful or not.
      IF YOU DON'T, ios will CRASH YOUR APP for spending too much time in the background.
      */
      backgroundGeoLocation.finish();
    };

      /**
      * Error handler
      */
    var failureFn = function(error) {
	  navigator.notification.alert(
			'BackgroundGeoLocation error ',  // message
			showNotify,         // callback
			'Game Over',            // title
			'Done'                  // buttonName
		);
    };

    // A lot of options is available here, you can see them all on plugin repo (see link below)
    backgroundGeoLocation.configure(callbackFn, failureFn, {
        desiredAccuracy: 10,
        stationaryRadius: 20,
        distanceFilter: 30,
        debug: true, // <-- Play sounds for background-geolocation life-cycle. Also will cause local notifications under iOS.
        stopOnTerminate: false, // <-- Clear background location settings when the app terminates
    });

    // Start tracking of user coords
    backgroundGeoLocation.start();
	alert('test2');
    // Stop tracking of user coords
    // backgroundGeoLocation.stop();
}
	

	</script>
</body>
</html>
